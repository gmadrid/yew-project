[tasks.default]
alias = "bundle"

[tasks.wasm]
description = "Build the wasm code"
command = "wasm-pack"
args = ["build", "--target", "web"]
dependencies = [ "format" ]
install_crate = { crate_name = "wasm-pack", binary = "wasm-pack", test_arg = "--help" }

[tasks.bundle]
description = "Bundle the wasm"
dependencies = [ "wasm" ]
command = "rollup"
args = [ "./twocolor.js", "--format", "iife", "--file", "./pkg/twocolor.js" ]

[tasks.bundle2]
description = "Bundle the wasm"
dependencies = [ "wasm" ]
command = "rollup"
args = [ "./other.js", "--format", "iife", "--file", "./pkg/other.js" ]

[tasks.watch-bundle]
watch=true
dependencies = ["default"]

[tasks.watch-bundle2]
watch=true
dependencies = ["bundle2"]
